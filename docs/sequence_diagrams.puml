@startuml
title Verify Team Profiles (UC-AM-01)

actor "Moderator" as Moderator
actor "Team Leader" as TeamLeader
boundary "ModeratorDashboard" as ModeratorDashboard
control "TeamVerificationController" as TeamVerificationController
entity "TeamProfile" as TeamProfile
boundary "TeamVerificationView" as TeamVerificationView
entity "Notification" as Notification
boundary "SuccessMessageDisplay" as SuccessMessageDisplay

Moderator -> ModeratorDashboard: Select "Pending Team Profiles"
activate ModeratorDashboard

ModeratorDashboard -> TeamVerificationController: Fetch pending submissions
activate TeamVerificationController

TeamVerificationController -> TeamProfile: Query status "Pending"
activate TeamProfile
TeamProfile --> TeamVerificationController: List of records
deactivate TeamProfile

create TeamVerificationView
TeamVerificationController -> TeamVerificationView: <<create>> (populate list)
activate TeamVerificationView

Moderator -> TeamVerificationView: Select team to review
Moderator -> TeamVerificationView: Click "Approve" or "Reject"

TeamVerificationView -> TeamVerificationController: Process decision

alt Decision is "Approve"
    TeamVerificationController -> TeamProfile: Update status to "Verified"
    activate TeamProfile
    deactivate TeamProfile

    create Notification
    TeamVerificationController -> Notification: <<create>> (for Team Leader)
    
    create SuccessMessageDisplay
    TeamVerificationController -> SuccessMessageDisplay: <<create>> (Confirm approval)
else Decision is "Reject"
    TeamVerificationController -> TeamProfile: Update status to "Rejected"
    activate TeamProfile
    deactivate TeamProfile

    create Notification
    TeamVerificationController -> Notification: <<create>> (for Team Leader)
    
    create SuccessMessageDisplay
    TeamVerificationController -> SuccessMessageDisplay: <<create>> (Confirm rejection)
end

TeamVerificationController -> TeamVerificationView: Refresh list
deactivate TeamVerificationView
deactivate TeamVerificationController
deactivate ModeratorDashboard

@enduml

@startuml
title Verify Field Profiles (UC-AM-02)

actor "Moderator" as Moderator
actor "Field Owner" as FieldOwner
boundary "ModeratorDashboard" as ModeratorDashboard
control "FieldVerificationController" as FieldVerificationController
entity "FieldProfile" as FieldProfile
boundary "FieldVerificationView" as FieldVerificationView
entity "Notification" as Notification
boundary "SuccessMessageDisplay" as SuccessMessageDisplay

Moderator -> ModeratorDashboard: Open "Field Verification" panel
activate ModeratorDashboard

ModeratorDashboard -> FieldVerificationController: Request pending field profiles
activate FieldVerificationController

FieldVerificationController -> FieldProfile: Retrieve entities "Pending Verification"
activate FieldProfile
FieldProfile --> FieldVerificationController: List of profiles
deactivate FieldProfile

create FieldVerificationView
FieldVerificationController -> FieldVerificationView: <<create>> (display list)
activate FieldVerificationView

Moderator -> FieldVerificationView: Review details and click "Approve" or "Reject"

FieldVerificationView -> FieldVerificationController: Process decision

alt Approved
    FieldVerificationController -> FieldProfile: Update status to "Verified"
    activate FieldProfile
    deactivate FieldProfile

    create Notification
    FieldVerificationController -> Notification: <<create>> (inform Field Owner)
else Rejected
    FieldVerificationController -> FieldProfile: Update status to "Rejected"
    activate FieldProfile
    deactivate FieldProfile

    create Notification
    FieldVerificationController -> Notification: <<create>> (with rejection reason)
end

create SuccessMessageDisplay
FieldVerificationController -> SuccessMessageDisplay: <<create>>

FieldVerificationController -> FieldVerificationView: Remove processed field from list
deactivate FieldVerificationView
deactivate FieldVerificationController
deactivate ModeratorDashboard

@enduml

@startuml
title Suspend / Reactivate Users (UC-AM-03)

actor "Moderator" as Moderator
actor "User" as User
boundary "UserManagementDashboard" as UserManagementDashboard
control "UserModerationController" as UserModerationController
entity "UserAccount" as UserAccount
boundary "UserDetailView" as UserDetailView
boundary "ConfirmationDialog" as ConfirmationDialog
entity "ModerationLog" as ModerationLog
entity "Notification" as Notification
boundary "SuccessMessageDisplay" as SuccessMessageDisplay

Moderator -> UserManagementDashboard: Search for a user
activate UserManagementDashboard

UserManagementDashboard -> UserModerationController: Find user
activate UserModerationController

UserModerationController -> UserAccount: Retrieve account and history
activate UserAccount
UserAccount --> UserModerationController: User data
deactivate UserAccount

create UserDetailView
UserModerationController -> UserDetailView: <<create>> (show violation history)
activate UserDetailView

Moderator -> UserDetailView: Select action ("Suspend", "Ban", "Reactivate")

create ConfirmationDialog
UserDetailView -> ConfirmationDialog: <<create>>
activate ConfirmationDialog

Moderator -> ConfirmationDialog: Confirm action
ConfirmationDialog -> UserModerationController: Execute state change
deactivate ConfirmationDialog
destroy ConfirmationDialog

UserModerationController -> UserAccount: Update status
activate UserAccount
deactivate UserAccount

create ModerationLog
UserModerationController -> ModerationLog: <<create>> (record action)

create Notification
UserModerationController -> Notification: <<create>> (inform User)

create SuccessMessageDisplay
UserModerationController -> SuccessMessageDisplay: <<create>> (confirm update)

UserModerationController -> UserDetailView: Refresh user status
deactivate UserDetailView
deactivate UserModerationController
deactivate UserManagementDashboard

@enduml

@startuml
title Moderate Reported Content (UC-AM-04)

actor "Moderator" as Moderator
actor "Reporter" as Reporter
actor "Reported User" as ReportedUser
boundary "ReportedContentDashboard" as ReportedContentDashboard
entity "Report" as Report
boundary "ReportDetailView" as ReportDetailView
control "ModerationController" as ModerationController
entity "Content" as Content
entity "Notification" as Notification
boundary "SuccessMessageDisplay" as SuccessMessageDisplay

Moderator -> ReportedContentDashboard: Open "Reported Content" dashboard
activate ReportedContentDashboard

ReportedContentDashboard -> Report: Display list of active reports
activate Report
Report --> ReportedContentDashboard: List of reports
deactivate Report

Moderator -> ReportedContentDashboard: Select report to view

create ReportDetailView
ReportedContentDashboard -> ReportDetailView: <<create>> (show content and reason)
activate ReportDetailView

Moderator -> ReportDetailView: Select action ("Keep", "Warn User", "Remove Content")

ReportDetailView -> ModerationController: Process action
activate ModerationController

alt Remove Content
    ModerationController -> Content: Set visibility to hidden/deleted
    activate Content
    deactivate Content

    ModerationController -> Report: Update status to "Resolved"
    activate Report
    deactivate Report

    create Notification
    ModerationController -> Notification: <<create>> (for Reported User)

    create Notification
    ModerationController -> Notification: <<create>> (for Reporter)
else Keep (Dismiss Report)
    ModerationController -> Report: Update status to "Dismissed"
    activate Report
    deactivate Report
end

create SuccessMessageDisplay
ModerationController -> SuccessMessageDisplay: <<create>>

ModerationController -> ReportDetailView: <<destroy>>
deactivate ReportDetailView
destroy ReportDetailView

deactivate ModerationController
deactivate ReportedContentDashboard

@enduml

@startuml
title Create Team Profile (UC-TL-01)

actor "Team Leader" as TeamLeader
actor "Moderator" as Moderator
boundary "Dashboard" as Dashboard
boundary "TeamCreationForm" as TeamCreationForm
control "TeamController" as TeamController
boundary "ErrorMessageDisplay" as ErrorMessageDisplay
entity "TeamProfile" as TeamProfile
entity "Notification" as Notification
boundary "SuccessMessageDisplay" as SuccessMessageDisplay

TeamLeader -> Dashboard: Click "Create Team"
activate Dashboard

create TeamCreationForm
Dashboard -> TeamCreationForm: <<create>>
activate TeamCreationForm

TeamLeader -> TeamCreationForm: Enter details and submit
TeamCreationForm -> TeamController: Validate input
activate TeamController

alt Validation fails
    create ErrorMessageDisplay
    TeamController -> ErrorMessageDisplay: <<create>>
else Validation succeeds
    create TeamProfile
    TeamController -> TeamProfile: <<create>> (status "Pending")
    
    create Notification
    TeamController -> Notification: <<create>> (for Moderator)
    
    create SuccessMessageDisplay
    TeamController -> SuccessMessageDisplay: <<create>>
    
    TeamController -> Dashboard: Redirect to new team dashboard
end

deactivate TeamController
deactivate TeamCreationForm
deactivate Dashboard

@enduml

@startuml
title Edit Team Profile (UC-TL-02)

actor "Team Leader" as TeamLeader
boundary "TeamProfileView" as TeamProfileView
boundary "TeamEditForm" as TeamEditForm
control "TeamController" as TeamController
entity "TeamProfile" as TeamProfile
boundary "SuccessMessageDisplay" as SuccessMessageDisplay

TeamLeader -> TeamProfileView: Click "Edit Team"
activate TeamProfileView

create TeamEditForm
TeamProfileView -> TeamEditForm: <<create>> (pre-filled)
activate TeamEditForm

TeamLeader -> TeamEditForm: Update fields and click "Save"
TeamEditForm -> TeamController: Validate new data
activate TeamController

TeamController -> TeamProfile: Update attributes
activate TeamProfile
deactivate TeamProfile

create SuccessMessageDisplay
TeamController -> SuccessMessageDisplay: <<create>>

TeamController -> TeamProfileView: Refresh view
deactivate TeamController
deactivate TeamEditForm
deactivate TeamProfileView

@enduml

@startuml
title Manage Team Roster (UC-TL-03)

actor "Team Leader" as TeamLeader
actor "Player" as Player
boundary "RosterManagementView" as RosterManagementView
boundary "ConfirmationDialog" as ConfirmationDialog
control "RosterController" as RosterController
entity "TeamRoster" as TeamRoster
entity "Notification" as Notification
boundary "SuccessMessageDisplay" as SuccessMessageDisplay

TeamLeader -> RosterManagementView: Open view
activate RosterManagementView

RosterManagementView -> TeamLeader: Display current list of players

TeamLeader -> RosterManagementView: Select player to remove

create ConfirmationDialog
RosterManagementView -> ConfirmationDialog: <<create>>
activate ConfirmationDialog

TeamLeader -> ConfirmationDialog: Confirm removal
ConfirmationDialog -> RosterController: Remove player
deactivate ConfirmationDialog
destroy ConfirmationDialog
activate RosterController

RosterController -> TeamRoster: Remove player association
activate TeamRoster
deactivate TeamRoster

create Notification
RosterController -> Notification: <<create>> (for removed Player)

create SuccessMessageDisplay
RosterController -> SuccessMessageDisplay: <<create>>

RosterController -> RosterManagementView: Update roster list
deactivate RosterController
deactivate RosterManagementView

@enduml

@startuml
title Approve Player Requests (UC-TL-04)

actor "Team Leader" as TeamLeader
actor "Player" as Player
boundary "JoinRequestList" as JoinRequestList
control "TeamController" as TeamController
entity "JoinRequest" as JoinRequest
entity "TeamRoster" as TeamRoster
entity "Notification" as Notification
boundary "SuccessMessageDisplay" as SuccessMessageDisplay

TeamLeader -> JoinRequestList: View pending requests
activate JoinRequestList

TeamLeader -> JoinRequestList: Click "Approve" or "Reject"
JoinRequestList -> TeamController: Process request
activate TeamController

alt Approved
    TeamController -> JoinRequest: Update status to "Accepted"
    activate JoinRequest
    deactivate JoinRequest

    TeamController -> TeamRoster: Add player
    activate TeamRoster
    deactivate TeamRoster

    create Notification
    TeamController -> Notification: <<create>> (Welcome Player)
else Rejected
    TeamController -> JoinRequest: Update status to "Rejected"
    activate JoinRequest
    deactivate JoinRequest

    create Notification
    TeamController -> Notification: <<create>> (for Player)
end

create SuccessMessageDisplay
TeamController -> SuccessMessageDisplay: <<create>>

TeamController -> JoinRequestList: Remove request from list
deactivate TeamController
deactivate JoinRequestList

@enduml

@startuml
title Delete Team (UC-TL-05)

actor "Team Leader" as TeamLeader
actor "Team Members" as TeamMembers
boundary "TeamSettingsView" as TeamSettingsView
boundary "ConfirmationDialog" as ConfirmationDialog
control "TeamController" as TeamController
entity "TeamRoster" as TeamRoster
entity "Notification" as Notification
entity "TeamProfile" as TeamProfile
boundary "SuccessMessageDisplay" as SuccessMessageDisplay
boundary "Dashboard" as Dashboard

TeamLeader -> TeamSettingsView: Click "Delete Team"
activate TeamSettingsView

create ConfirmationDialog
TeamSettingsView -> ConfirmationDialog: <<create>> (critical warning)
activate ConfirmationDialog

TeamLeader -> ConfirmationDialog: Confirm deletion
ConfirmationDialog -> TeamController: Process deletion
deactivate ConfirmationDialog
destroy ConfirmationDialog
activate TeamController

TeamController -> TeamRoster: Retrieve all members
activate TeamRoster
TeamRoster --> TeamController: List of members
deactivate TeamRoster

loop For each member
    create Notification
    TeamController -> Notification: <<create>>
end

TeamController -> TeamProfile: Delete (or soft-delete) record
activate TeamProfile
deactivate TeamProfile

create SuccessMessageDisplay
TeamController -> SuccessMessageDisplay: <<create>>

TeamController -> Dashboard: Redirect to main dashboard
deactivate TeamController
deactivate TeamSettingsView

@enduml

@startuml
title Create Match Events (UC-TL-06)

actor "Team Leader" as TeamLeader
actor "Stadium Owner" as StadiumOwner
boundary "MatchCreationForm" as MatchCreationForm
control "MatchController" as MatchController
entity "Stadium" as Stadium
boundary "ErrorMessageDisplay" as ErrorMessageDisplay
entity "MatchEvent" as MatchEvent
entity "Notification" as Notification
boundary "SuccessMessageDisplay" as SuccessMessageDisplay
boundary "MatchListView" as MatchListView

TeamLeader -> MatchCreationForm: Open form
activate MatchCreationForm

TeamLeader -> MatchCreationForm: Select date, time, and stadium
MatchCreationForm -> MatchController: Check availability
activate MatchController

MatchController -> Stadium: Check availability for slot
activate Stadium
Stadium --> MatchController: Availability status
deactivate Stadium

alt Unavailable
    create ErrorMessageDisplay
    MatchController -> ErrorMessageDisplay: <<create>>
else Available
    create MatchEvent
    MatchController -> MatchEvent: <<create>> (status "Pending Approval")
    
    create Notification
    MatchController -> Notification: <<create>> (for Stadium Owner)
    
    create SuccessMessageDisplay
    MatchController -> SuccessMessageDisplay: <<create>>
    
    MatchController -> MatchListView: Show match in "Pending" list
end

deactivate MatchController
deactivate MatchCreationForm

@enduml

@startuml
title Cancel Match Events (UC-TL-07)

actor "Team Leader" as TeamLeader
actor "Stadium Owner" as StadiumOwner
actor "Opponent Team Leader" as OpponentTeamLeader
boundary "MatchDetailView" as MatchDetailView
boundary "CancellationPolicyDisplay" as CancellationPolicyDisplay
boundary "ConfirmationDialog" as ConfirmationDialog
control "MatchController" as MatchController
entity "MatchEvent" as MatchEvent
entity "Notification" as Notification
boundary "SuccessMessageDisplay" as SuccessMessageDisplay

TeamLeader -> MatchDetailView: Click "Cancel Match"
activate MatchDetailView

create CancellationPolicyDisplay
MatchDetailView -> CancellationPolicyDisplay: <<create>>
activate CancellationPolicyDisplay
deactivate CancellationPolicyDisplay

TeamLeader -> MatchDetailView: Confirm cancellation (implied via dialog usually, but text says confirms)
create ConfirmationDialog
MatchDetailView -> ConfirmationDialog: <<create>>
activate ConfirmationDialog

TeamLeader -> ConfirmationDialog: Confirm
ConfirmationDialog -> MatchController: Process cancellation
deactivate ConfirmationDialog
destroy ConfirmationDialog
activate MatchController

MatchController -> MatchEvent: Update status to "Cancelled"
activate MatchEvent
deactivate MatchEvent

create Notification
MatchController -> Notification: <<create>> (for Stadium Owner)

create Notification
MatchController -> Notification: <<create>> (for Opponent Team Leader if assigned)

create SuccessMessageDisplay
MatchController -> SuccessMessageDisplay: <<create>>

MatchController -> MatchDetailView: Update match status view
deactivate MatchController
deactivate MatchDetailView

@enduml

@startuml
title Respond to Match Invitations (UC-TL-08)

actor "Team Leader" as TeamLeader
actor "Inviting Team Leader" as InvitingTeamLeader
boundary "InvitationListView" as InvitationListView
control "MatchController" as MatchController
entity "MatchInvitation" as MatchInvitation
entity "MatchEvent" as MatchEvent
entity "Notification" as Notification
boundary "SuccessMessageDisplay" as SuccessMessageDisplay

TeamLeader -> InvitationListView: View invitations
activate InvitationListView

TeamLeader -> InvitationListView: Select invitation and click "Accept" or "Decline"
InvitationListView -> MatchController: Process response
activate MatchController

alt Accepted
    MatchController -> MatchInvitation: Update status to "Accepted"
    activate MatchInvitation
    deactivate MatchInvitation

    MatchController -> MatchEvent: Update with opponent team ID
    activate MatchEvent
    deactivate MatchEvent

    create Notification
    MatchController -> Notification: <<create>> (for Inviting Team Leader)
else Declined
    MatchController -> MatchInvitation: Update status to "Declined"
    activate MatchInvitation
    deactivate MatchInvitation

    create Notification
    MatchController -> Notification: <<create>> (for Inviting Team Leader)
end

create SuccessMessageDisplay
MatchController -> SuccessMessageDisplay: <<create>>

deactivate MatchController
deactivate InvitationListView

@enduml

@startuml
title Track Match Attendance (UC-TL-09)

actor "Team Leader" as TeamLeader
boundary "AttendanceView" as AttendanceView
control "AttendanceController" as AttendanceController
entity "AttendanceRecord" as AttendanceRecord
boundary "SuccessMessageDisplay" as SuccessMessageDisplay

TeamLeader -> AttendanceView: Open view for specific match
activate AttendanceView

AttendanceView -> TeamLeader: Display list of players

TeamLeader -> AttendanceView: Toggle status (Present/Absent)
TeamLeader -> AttendanceView: Click "Save"

AttendanceView -> AttendanceController: Save attendance
activate AttendanceController

loop For each player
    AttendanceController -> AttendanceRecord: Update or create entity
    activate AttendanceRecord
    deactivate AttendanceRecord
end

create SuccessMessageDisplay
AttendanceController -> SuccessMessageDisplay: <<create>>

AttendanceController -> AttendanceView: Show summary stats
deactivate AttendanceController
deactivate AttendanceView

@enduml

@startuml
title Manage Team Funds (UC-TL-10)

actor "Team Leader" as TeamLeader
boundary "FinanceDashboard" as FinanceDashboard
boundary "TransactionForm" as TransactionForm
control "FinanceController" as FinanceController
entity "TransactionLog" as TransactionLog
entity "TeamWallet" as TeamWallet
boundary "SuccessMessageDisplay" as SuccessMessageDisplay

TeamLeader -> FinanceDashboard: Open dashboard
activate FinanceDashboard

FinanceDashboard -> TeamLeader: Display balance and history

TeamLeader -> FinanceDashboard: Click "Add Transaction"

create TransactionForm
FinanceDashboard -> TransactionForm: <<create>>
activate TransactionForm

TeamLeader -> TransactionForm: Enter amount, type, description
TransactionForm -> FinanceController: Validate input
activate FinanceController

create TransactionLog
FinanceController -> TransactionLog: <<create>>

FinanceController -> TeamWallet: Update balance
activate TeamWallet
deactivate TeamWallet

create SuccessMessageDisplay
FinanceController -> SuccessMessageDisplay: <<create>>

FinanceController -> FinanceDashboard: Refresh dashboard
deactivate FinanceController
deactivate TransactionForm
deactivate FinanceDashboard

@enduml

@startuml
title Edit Player Profile (UC-PL-01)

actor "Player" as Player
boundary "PlayerProfileView" as PlayerProfileView
boundary "PlayerEditForm" as PlayerEditForm
control "PlayerController" as PlayerController
entity "PlayerProfile" as PlayerProfile
boundary "SuccessMessageDisplay" as SuccessMessageDisplay

Player -> PlayerProfileView: Navigate to "My Profile"
activate PlayerProfileView

create PlayerEditForm
PlayerProfileView -> PlayerEditForm: <<create>> (with current data)
activate PlayerEditForm

Player -> PlayerEditForm: Update fields and submit
PlayerEditForm -> PlayerController: Validate input
activate PlayerController

PlayerController -> PlayerProfile: Update record
activate PlayerProfile
deactivate PlayerProfile

create SuccessMessageDisplay
PlayerController -> SuccessMessageDisplay: <<create>>

PlayerController -> PlayerProfileView: Show updated profile
deactivate PlayerController
deactivate PlayerEditForm
deactivate PlayerProfileView

@enduml

@startuml
title Request to Join Team (UC-PL-02)

actor "Player" as Player
actor "Team Leader" as TeamLeader
boundary "TeamSearchView" as TeamSearchView
boundary "TeamDetailView" as TeamDetailView
control "TeamController" as TeamController
entity "JoinRequest" as JoinRequest
entity "Notification" as Notification
boundary "SuccessMessageDisplay" as SuccessMessageDisplay

Player -> TeamSearchView: Select team
activate TeamSearchView

Player -> TeamDetailView: Click "Request to Join"
activate TeamDetailView

TeamDetailView -> TeamController: Process request
activate TeamController

TeamController -> TeamController: Check if request exists

create JoinRequest
TeamController -> JoinRequest: <<create>> (status "Pending")

create Notification
TeamController -> Notification: <<create>> (for Team Leader)

create SuccessMessageDisplay
TeamController -> SuccessMessageDisplay: <<create>>

deactivate TeamController
deactivate TeamDetailView
deactivate TeamSearchView

@enduml

@startuml
title Leave Team (UC-PL-03)

actor "Player" as Player
actor "Team Leader" as TeamLeader
boundary "MyTeamsView" as MyTeamsView
boundary "ConfirmationDialog" as ConfirmationDialog
control "TeamController" as TeamController
entity "TeamRoster" as TeamRoster
entity "Notification" as Notification
boundary "SuccessMessageDisplay" as SuccessMessageDisplay

Player -> MyTeamsView: Select team
activate MyTeamsView

Player -> MyTeamsView: Click "Leave Team"

create ConfirmationDialog
MyTeamsView -> ConfirmationDialog: <<create>>
activate ConfirmationDialog

Player -> ConfirmationDialog: Confirm action
ConfirmationDialog -> TeamController: Process leave
deactivate ConfirmationDialog
destroy ConfirmationDialog
activate TeamController

TeamController -> TeamRoster: Remove player
activate TeamRoster
deactivate TeamRoster

create Notification
TeamController -> Notification: <<create>> (for Team Leader)

create SuccessMessageDisplay
TeamController -> SuccessMessageDisplay: <<create>>

TeamController -> MyTeamsView: Remove team from list
deactivate TeamController
deactivate MyTeamsView

@enduml

@startuml
title View Match Schedule (UC-PL-04)

actor "Player" as Player
boundary "ScheduleView" as ScheduleView
control "MatchController" as MatchController
entity "TeamRoster" as TeamRoster
entity "MatchEvent" as MatchEvent
boundary "MatchListDisplay" as MatchListDisplay
boundary "MatchDetailView" as MatchDetailView

Player -> ScheduleView: Navigate to "My Schedule"
activate ScheduleView

ScheduleView -> MatchController: Get schedule
activate MatchController

MatchController -> TeamRoster: Retrieve player's teams
activate TeamRoster
TeamRoster --> MatchController: List of teams
deactivate TeamRoster

MatchController -> MatchEvent: Query matches for teams
activate MatchEvent
MatchEvent --> MatchController: List of matches
deactivate MatchEvent

create MatchListDisplay
MatchController -> MatchListDisplay: <<create>> (with data)
activate MatchListDisplay

Player -> MatchListDisplay: Select match to view details
create MatchDetailView
MatchListDisplay -> MatchDetailView: <<create>>
activate MatchDetailView

deactivate MatchListDisplay
deactivate MatchController
deactivate ScheduleView

@enduml

@startuml
title Confirm Match Attendance (UC-PL-05)

actor "Player" as Player
actor "Team Leader" as TeamLeader
boundary "MatchDetailView" as MatchDetailView
control "AttendanceController" as AttendanceController
entity "AttendanceRecord" as AttendanceRecord
boundary "SuccessMessageDisplay" as SuccessMessageDisplay

Player -> MatchDetailView: Open match
activate MatchDetailView

Player -> MatchDetailView: Click "Confirm Attendance"
MatchDetailView -> AttendanceController: Process confirmation
activate AttendanceController

AttendanceController -> AttendanceRecord: Check if exists
activate AttendanceRecord
AttendanceRecord --> AttendanceController: Result
deactivate AttendanceRecord

alt Not exists
    create AttendanceRecord
    AttendanceController -> AttendanceRecord: <<create>>
end

AttendanceController -> AttendanceRecord: Update status to "Present"
activate AttendanceRecord
deactivate AttendanceRecord

create SuccessMessageDisplay
AttendanceController -> SuccessMessageDisplay: <<create>>

AttendanceController -> MatchDetailView: Update button state to "Confirmed"
deactivate AttendanceController
deactivate MatchDetailView

@enduml

@startuml
title Create Field Profile (UC-FO-01)

actor "Field Owner" as FieldOwner
actor "Moderator" as Moderator
boundary "Dashboard" as Dashboard
boundary "FieldCreationForm" as FieldCreationForm
control "FieldController" as FieldController
boundary "ErrorMessageDisplay" as ErrorMessageDisplay
entity "FieldProfile" as FieldProfile
entity "Notification" as Notification
boundary "SuccessMessageDisplay" as SuccessMessageDisplay
boundary "FieldManagementView" as FieldManagementView

FieldOwner -> Dashboard: Select "Register New Field"
activate Dashboard

create FieldCreationForm
Dashboard -> FieldCreationForm: <<create>>
activate FieldCreationForm

FieldOwner -> FieldCreationForm: Enter details and upload photos
FieldCreationForm -> FieldController: Validate input
activate FieldController

alt Validation fails
    create ErrorMessageDisplay
    FieldController -> ErrorMessageDisplay: <<create>>
else Validation succeeds
    create FieldProfile
    FieldController -> FieldProfile: <<create>> (status "Pending Verification")
    
    create Notification
    FieldController -> Notification: <<create>> (for Moderator)
    
    create SuccessMessageDisplay
    FieldController -> SuccessMessageDisplay: <<create>>
    
    FieldController -> FieldManagementView: Redirect to dashboard
    activate FieldManagementView
    deactivate FieldManagementView
end

deactivate FieldController
deactivate FieldCreationForm
deactivate Dashboard

@enduml

@startuml
title Edit Field Profile (UC-FO-02)

actor "Field Owner" as FieldOwner
actor "Moderator" as Moderator
boundary "FieldManagementView" as FieldManagementView
boundary "FieldEditForm" as FieldEditForm
control "FieldController" as FieldController
entity "FieldProfile" as FieldProfile
entity "Notification" as Notification
boundary "SuccessMessageDisplay" as SuccessMessageDisplay

FieldOwner -> FieldManagementView: Select field
activate FieldManagementView

create FieldEditForm
FieldManagementView -> FieldEditForm: <<create>> (with current data)
activate FieldEditForm

FieldOwner -> FieldEditForm: Modify details and click "Save"
FieldEditForm -> FieldController: Process update
activate FieldController

FieldController -> FieldController: Check for critical changes

alt Critical changes
    FieldController -> FieldProfile: Update status to "Pending Verification"
    activate FieldProfile
    deactivate FieldProfile

    create Notification
    FieldController -> Notification: <<create>> (for Moderator)
else Minor changes
    FieldController -> FieldProfile: Update attributes directly
    activate FieldProfile
    deactivate FieldProfile
end

create SuccessMessageDisplay
FieldController -> SuccessMessageDisplay: <<create>>

deactivate FieldController
deactivate FieldEditForm
deactivate FieldManagementView

@enduml

@startuml
title View Booking Requests (UC-FO-03)

actor "Field Owner" as FieldOwner
boundary "BookingManagementView" as BookingManagementView
control "BookingController" as BookingController
entity "BookingRequest" as BookingRequest
boundary "EmptyStateDisplay" as EmptyStateDisplay
boundary "BookingRequestList" as BookingRequestList

FieldOwner -> BookingManagementView: Navigate to "Booking Management"
activate BookingManagementView

BookingManagementView -> BookingController: Retrieve pending requests
activate BookingController

BookingController -> BookingRequest: Query status "Pending"
activate BookingRequest
BookingRequest --> BookingController: List of requests
deactivate BookingRequest

alt No requests found
    create EmptyStateDisplay
    BookingController -> EmptyStateDisplay: <<create>>
else Requests exist
    create BookingRequestList
    BookingController -> BookingRequestList: <<create>> (display list)
    activate BookingRequestList
    
    FieldOwner -> BookingRequestList: Select request to view details
    deactivate BookingRequestList
end

deactivate BookingController
deactivate BookingManagementView

@enduml

@startuml
title Response Booking Requests (UC-FO-04)

actor "Field Owner" as FieldOwner
actor "Team Leader" as TeamLeader
boundary "BookingDetailView" as BookingDetailView
control "BookingController" as BookingController
entity "FieldCalendar" as FieldCalendar
boundary "ConflictWarningDisplay" as ConflictWarningDisplay
entity "BookingRequest" as BookingRequest
entity "Notification" as Notification
boundary "SuccessMessageDisplay" as SuccessMessageDisplay

FieldOwner -> BookingDetailView: View pending request
activate BookingDetailView

FieldOwner -> BookingDetailView: Click "Approve" or "Reject"
BookingDetailView -> BookingController: Process decision
activate BookingController

alt Approve
    BookingController -> FieldCalendar: Check for conflicts
    activate FieldCalendar
    FieldCalendar --> BookingController: Conflict status
    deactivate FieldCalendar

    alt Conflict exists
        create ConflictWarningDisplay
        BookingController -> ConflictWarningDisplay: <<create>>
    else No conflict
        BookingController -> BookingRequest: Update status to "Confirmed"
        activate BookingRequest
        deactivate BookingRequest

        BookingController -> FieldCalendar: Mark slot as "Booked"
        activate FieldCalendar
        deactivate FieldCalendar

        create Notification
        BookingController -> Notification: <<create>> (for Team Leader)
    end
else Reject
    BookingController -> BookingRequest: Update status to "Rejected"
    activate BookingRequest
    deactivate BookingRequest

    create Notification
    BookingController -> Notification: <<create>> (for Team Leader)
end

create SuccessMessageDisplay
BookingController -> SuccessMessageDisplay: <<create>>

deactivate BookingController
deactivate BookingDetailView

@enduml

@startuml
title Manage Booking Calendar (UC-FO-05)

actor "Field Owner" as FieldOwner
actor "Team Leader" as TeamLeader
boundary "CalendarView" as CalendarView
boundary "SlotDetailView" as SlotDetailView
boundary "ConfirmationDialog" as ConfirmationDialog
control "BookingController" as BookingController
entity "BookingRequest" as BookingRequest
entity "FieldCalendar" as FieldCalendar
entity "Notification" as Notification
boundary "SuccessMessageDisplay" as SuccessMessageDisplay

FieldOwner -> CalendarView: Open view
activate CalendarView

CalendarView -> FieldOwner: Display calendar with slots

FieldOwner -> CalendarView: Click on a slot

create SlotDetailView
CalendarView -> SlotDetailView: <<create>>
activate SlotDetailView

FieldOwner -> SlotDetailView: Choose action ("Cancel Booking" or "Block Slot")

alt Cancel Booking
    create ConfirmationDialog
    SlotDetailView -> ConfirmationDialog: <<create>>
    activate ConfirmationDialog
    
    FieldOwner -> ConfirmationDialog: Confirm
    ConfirmationDialog -> BookingController: Process cancellation
    deactivate ConfirmationDialog
    destroy ConfirmationDialog
    activate BookingController

    BookingController -> BookingRequest: Update status to "Cancelled"
    activate BookingRequest
    deactivate BookingRequest

    BookingController -> FieldCalendar: Update to "Available"
    activate FieldCalendar
    deactivate FieldCalendar

    create Notification
    BookingController -> Notification: <<create>> (for Team Leader)
else Block Slot
    SlotDetailView -> BookingController: Process block
    
    BookingController -> FieldCalendar: Update status to "Maintenance/Blocked"
    activate FieldCalendar
    deactivate FieldCalendar
end

create SuccessMessageDisplay
BookingController -> SuccessMessageDisplay: <<create>>

BookingController -> CalendarView: Refresh calendar
deactivate BookingController
deactivate SlotDetailView
deactivate CalendarView

@enduml

@startuml
title Register (UC-AU-01)

actor "User" as User
boundary "RegistrationForm" as RegistrationForm
control "AuthController" as AuthController
boundary "ErrorMessageDisplay" as ErrorMessageDisplay
entity "UserAccount" as UserAccount
entity "EmailService" as EmailService
boundary "SuccessMessageDisplay" as SuccessMessageDisplay
boundary "LoginPage" as LoginPage

User -> RegistrationForm: Select "Register"
activate RegistrationForm

create RegistrationForm
User -> RegistrationForm: <<create>> (implied re-entry or init)

User -> RegistrationForm: Enter credentials and profile info
RegistrationForm -> AuthController: Validate input
activate AuthController

alt Validation fails
    create ErrorMessageDisplay
    AuthController -> ErrorMessageDisplay: <<create>>
else Validation succeeds
    create UserAccount
    AuthController -> UserAccount: <<create>>
    
    AuthController -> EmailService: Send verification email
    activate EmailService
    deactivate EmailService
    
    create SuccessMessageDisplay
    AuthController -> SuccessMessageDisplay: <<create>>
    
    AuthController -> LoginPage: Redirect
end

deactivate AuthController
deactivate RegistrationForm

@enduml

@startuml
title Login (UC-AU-02)

actor "User" as User
boundary "LoginForm" as LoginForm
control "AuthController" as AuthController
entity "UserAccount" as UserAccount
boundary "ErrorMessageDisplay" as ErrorMessageDisplay
entity "Session" as Session
boundary "Dashboard" as Dashboard

User -> LoginForm: Enter username and password
activate LoginForm

User -> LoginForm: Click "Login"
LoginForm -> AuthController: Verify credentials
activate AuthController

AuthController -> UserAccount: Verify credentials
activate UserAccount
UserAccount --> AuthController: Result
deactivate UserAccount

alt Invalid
    create ErrorMessageDisplay
    AuthController -> ErrorMessageDisplay: <<create>>
else Valid
    AuthController -> AuthController: Check if active/verified
    
    create Session
    AuthController -> Session: <<create>>
    
    AuthController -> Dashboard: Redirect to role-specific dashboard
end

deactivate AuthController
deactivate LoginForm

@enduml

@startuml
title Logout (UC-AU-03)

actor "Authenticated User" as User
boundary "NavigationBar" as NavigationBar
control "AuthController" as AuthController
entity "Session" as Session
boundary "LoginPage" as LoginPage

User -> NavigationBar: Click "Logout"
activate NavigationBar

NavigationBar -> AuthController: Request logout
activate AuthController

AuthController -> Session: Retrieve current session
activate Session
deactivate Session

AuthController -> Session: <<destroy>>
destroy Session

AuthController -> LoginPage: Redirect
deactivate AuthController
deactivate NavigationBar

@enduml

@startuml
title Change Password (UC-AU-04)

actor "Authenticated User" as User
boundary "PasswordChangeForm" as PasswordChangeForm
control "AuthController" as AuthController
entity "UserAccount" as UserAccount
boundary "ErrorMessageDisplay" as ErrorMessageDisplay
boundary "SuccessMessageDisplay" as SuccessMessageDisplay

User -> PasswordChangeForm: Open form
activate PasswordChangeForm

User -> PasswordChangeForm: Enter current and new password
PasswordChangeForm -> AuthController: Verify current password
activate AuthController

AuthController -> UserAccount: Verify password
activate UserAccount
UserAccount --> AuthController: Result
deactivate UserAccount

alt Incorrect
    create ErrorMessageDisplay
    AuthController -> ErrorMessageDisplay: <<create>>
else Correct
    AuthController -> UserAccount: Update with new password hash
    activate UserAccount
    deactivate UserAccount
    
    create SuccessMessageDisplay
    AuthController -> SuccessMessageDisplay: <<create>>
    
    AuthController -> PasswordChangeForm: Clear form
end

deactivate AuthController
deactivate PasswordChangeForm

@enduml

@startuml
title Search for Teams (UC-SD-01)

actor "User" as User
boundary "SearchBar" as SearchBar
control "SearchController" as SearchController
entity "TeamProfile" as TeamProfile
boundary "EmptyStateDisplay" as EmptyStateDisplay
boundary "SearchResultsView" as SearchResultsView

User -> SearchBar: Enter query (name, location)
activate SearchBar

SearchBar -> SearchController: Receive query
activate SearchController

SearchController -> TeamProfile: Query matches
activate TeamProfile
TeamProfile --> SearchController: Results
deactivate TeamProfile

alt No matches
    create EmptyStateDisplay
    SearchController -> EmptyStateDisplay: <<create>>
else Matches found
    create SearchResultsView
    SearchController -> SearchResultsView: <<create>> (with list)
end

User -> SearchResultsView: View results
deactivate SearchController
deactivate SearchBar

@enduml

@startuml
title Search for Fields (UC-SD-02)

actor "User" as User
boundary "SearchBar" as SearchBar
control "SearchController" as SearchController
entity "FieldProfile" as FieldProfile
boundary "EmptyStateDisplay" as EmptyStateDisplay
boundary "SearchResultsView" as SearchResultsView

User -> SearchBar: Enter criteria (amenities, price)
activate SearchBar

SearchBar -> SearchController: Receive query
activate SearchController

SearchController -> FieldProfile: Query entities
activate FieldProfile
FieldProfile --> SearchController: Results
deactivate FieldProfile

alt No matches
    create EmptyStateDisplay
    SearchController -> EmptyStateDisplay: <<create>>
else Matches found
    create SearchResultsView
    SearchController -> SearchResultsView: <<create>>
end

User -> SearchResultsView: View list
deactivate SearchController
deactivate SearchBar

@enduml

@startuml
title Search for Players (UC-SD-03)

actor "User" as User
boundary "SearchBar" as SearchBar
control "SearchController" as SearchController
entity "PlayerProfile" as PlayerProfile
boundary "EmptyStateDisplay" as EmptyStateDisplay
boundary "SearchResultsView" as SearchResultsView

User -> SearchBar: Enter criteria (position, skill)
activate SearchBar

SearchBar -> SearchController: Receive query
activate SearchController

SearchController -> PlayerProfile: Query entities
activate PlayerProfile
PlayerProfile --> SearchController: Results
deactivate PlayerProfile

alt No matches
    create EmptyStateDisplay
    SearchController -> EmptyStateDisplay: <<create>>
else Matches found
    create SearchResultsView
    SearchController -> SearchResultsView: <<create>>
end

User -> SearchResultsView: View list
deactivate SearchController
deactivate SearchBar

@enduml

@startuml
title Search for Field Owners (UC-SD-04)

actor "User" as User
boundary "SearchBar" as SearchBar
control "SearchController" as SearchController
entity "UserAccount" as UserAccount
boundary "EmptyStateDisplay" as EmptyStateDisplay
boundary "SearchResultsView" as SearchResultsView

User -> SearchBar: Enter criteria
activate SearchBar

SearchBar -> SearchController: Receive query
activate SearchController

SearchController -> UserAccount: Query role "FieldOwner"
activate UserAccount
UserAccount --> SearchController: Results
deactivate UserAccount

alt No matches
    create EmptyStateDisplay
    SearchController -> EmptyStateDisplay: <<create>>
else Matches found
    create SearchResultsView
    SearchController -> SearchResultsView: <<create>>
end

User -> SearchResultsView: View list
deactivate SearchController
deactivate SearchBar

@enduml

@startuml
title View Match Information (UC-SD-05)

actor "User" as User
boundary "MatchLink" as MatchLink
control "MatchController" as MatchController
entity "MatchEvent" as MatchEvent
boundary "ErrorMessageDisplay" as ErrorMessageDisplay
boundary "MatchDetailView" as MatchDetailView

User -> MatchLink: Select match link
activate MatchLink

MatchLink -> MatchController: Retrieve match
activate MatchController

MatchController -> MatchEvent: Get match data
activate MatchEvent
MatchEvent --> MatchController: Data
deactivate MatchEvent

MatchController -> MatchController: Check permission

alt Unauthorized
    create ErrorMessageDisplay
    MatchController -> ErrorMessageDisplay: <<create>>
else Authorized
    create MatchDetailView
    MatchController -> MatchDetailView: <<create>> (with data)
end

User -> MatchDetailView: View details
deactivate MatchController
deactivate MatchLink

@enduml

@startuml
title Receive Notifications (UC-CM-01)

actor "User" as User
boundary "NotificationCenter" as NotificationCenter
control "NotificationController" as NotificationController
entity "Notification" as Notification

[-> NotificationController: Triggering event (e.g. Match Invitation)
activate NotificationController

create Notification
NotificationController -> Notification: <<create>>

NotificationController -> NotificationCenter: Push notification
activate NotificationCenter

User -> NotificationCenter: See alert
User -> NotificationCenter: Click to view details

NotificationCenter -> Notification: Mark as read
activate Notification
deactivate Notification

deactivate NotificationCenter
deactivate NotificationController

@enduml

@startuml
title Manage Notification Settings (UC-CM-02)

actor "User" as User
boundary "NotificationSettingsView" as NotificationSettingsView
control "NotificationController" as NotificationController
entity "UserProfile" as UserProfile
boundary "SuccessMessageDisplay" as SuccessMessageDisplay

User -> NotificationSettingsView: Open view
activate NotificationSettingsView

User -> NotificationSettingsView: Toggle preferences and click "Save"
NotificationSettingsView -> NotificationController: Validate input
activate NotificationController

NotificationController -> UserProfile: Update preferences
activate UserProfile
deactivate UserProfile

create SuccessMessageDisplay
NotificationController -> SuccessMessageDisplay: <<create>>

deactivate NotificationController
deactivate NotificationSettingsView

@enduml

@startuml
title Browse Public Content (UC-CI-01)

actor "User" as User
boundary "CommunityFeedView" as CommunityFeedView
control "ContentController" as ContentController
entity "Post" as Post
boundary "EmptyStateDisplay" as EmptyStateDisplay

User -> CommunityFeedView: Open Community tab
activate CommunityFeedView

CommunityFeedView -> ContentController: Retrieve public posts
activate ContentController

ContentController -> Post: Query posts (sorted)
activate Post
Post --> ContentController: List of posts
deactivate Post

alt No posts
    create EmptyStateDisplay
    ContentController -> EmptyStateDisplay: <<create>>
else Posts exist
    create CommunityFeedView
    ContentController -> CommunityFeedView: <<create>> (with content)
    activate CommunityFeedView
    deactivate CommunityFeedView
end

User -> CommunityFeedView: Scroll through feed
deactivate ContentController
deactivate CommunityFeedView

@enduml

@startuml
title Create Community Posts (UC-CI-02)

actor "User" as User
boundary "PostCreationForm" as PostCreationForm
control "ContentController" as ContentController
entity "Post" as Post
boundary "SuccessMessageDisplay" as SuccessMessageDisplay
boundary "CommunityFeedView" as CommunityFeedView

User -> PostCreationForm: Click "Create Post"
activate PostCreationForm

create PostCreationForm
User -> PostCreationForm: <<create>>

User -> PostCreationForm: Enter text, upload images, select visibility
PostCreationForm -> ContentController: Validate content
activate ContentController

create Post
ContentController -> Post: <<create>>

create SuccessMessageDisplay
ContentController -> SuccessMessageDisplay: <<create>>

ContentController -> CommunityFeedView: Add post to feed
activate CommunityFeedView
deactivate CommunityFeedView

deactivate ContentController
deactivate PostCreationForm

@enduml

@startuml
title Comment on Posts (UC-CI-03)

actor "User" as User
boundary "CommentSection" as CommentSection
control "ContentController" as ContentController
entity "Comment" as Comment
entity "Post" as Post
entity "Notification" as Notification

User -> CommentSection: Type comment
activate CommentSection

User -> CommentSection: Click "Post Comment"
CommentSection -> ContentController: Process comment
activate ContentController

create Comment
ContentController -> Comment: <<create>>

ContentController -> Comment: Link to Post
activate Comment
deactivate Comment

create Notification
ContentController -> Notification: <<create>> (for Post Author)

ContentController -> CommentSection: Show new comment
deactivate ContentController
deactivate CommentSection

@enduml

@startuml
title Like/React Content (UC-CI-04)

actor "User" as User
boundary "ReactionButton" as ReactionButton
control "ContentController" as ContentController
entity "Reaction" as Reaction
entity "Post" as Post
entity "Notification" as Notification

User -> ReactionButton: Click "Like"
activate ReactionButton

ReactionButton -> ContentController: Process reaction
activate ContentController

ContentController -> Reaction: Check if exists
activate Reaction
Reaction --> ContentController: Result
deactivate Reaction

alt Not exists
    create Reaction
    ContentController -> Reaction: <<create>>
end

ContentController -> Post: Update reaction count
activate Post
deactivate Post

create Notification
ContentController -> Notification: <<create>> (for Post Author)

ContentController -> ReactionButton: Update state to "Liked"
deactivate ContentController
deactivate ReactionButton

@enduml

@startuml
title Report Misconduct (UC-CI-05)

actor "User" as User
actor "Moderator" as Moderator
boundary "ContentItem" as ContentItem
boundary "ReportForm" as ReportForm
control "ModerationController" as ModerationController
entity "Report" as Report
entity "Notification" as Notification
boundary "SuccessMessageDisplay" as SuccessMessageDisplay

User -> ContentItem: Click "Report"
activate ContentItem

create ReportForm
ContentItem -> ReportForm: <<create>>
activate ReportForm

User -> ReportForm: Select reason and add details
ReportForm -> ModerationController: Submit report
activate ModerationController

create Report
ModerationController -> Report: <<create>> (status "Pending")

create Notification
ModerationController -> Notification: <<create>> (for Moderator)

create SuccessMessageDisplay
ModerationController -> SuccessMessageDisplay: <<create>>

ModerationController -> ReportForm: Close form
deactivate ModerationController
deactivate ReportForm
deactivate ContentItem

@enduml
